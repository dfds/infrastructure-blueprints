name: Generate blueprints

on:
  workflow_dispatch:

defaults:
  run:
    shell: bash

jobs:
  Generate-files:
    runs-on: ubuntu-latest
    # container:
    #   image: dfdsdk/python-pipeline:0.0.4
    steps:
      - name: Checkout source code
        uses: actions/checkout@v4
      - name: Run script
        run: |
          # chmod +x ./aws-rds/blueprints/scripts/generate-blueprints.sh
          # ./aws-rds/blueprints/scripts/generate-blueprints.sh
          # ./aws-rds/blueprints/scripts/aws-modules-rds/tools/scaffolding/generate_blueprints.sh

          # echo "list files in /aws-rds/blueprints/"
          # ls /aws-rds/blueprints/scripts/aws-modules-rds/tools/scaffolding
          echo "Running generate_blueprints.sh"
          ./aws-rds/blueprints/scripts/aws-modules-rds/tools/scaffolding/generate_blueprints.sh
          echo "Finished running generate_blueprints.sh"
          ls -a
          cp -a /aws-rds/blueprints/scripts/aws-modules-rds/tools/scaffolding/auto-generated/. /aws-rds/blueprints/easycreate

          ls /aws-rds/blueprints/easycreate
          # cd ../../..
          #rm -rf aws-modules-rds

        shell: bash
