name: Generate blueprints

on:
  workflow_dispatch:

defaults:
  run:
    shell: bash

jobs:
  Generate-files:
    runs-on: ubuntu-latest
    env:
      DEST_DIR: ${{github.runner.workspace}}/aws-rds/blueprints/basic/
    steps:
      - name: Checkout source code
        uses: actions/checkout@v4
      - name: Check
        run: |
          # printenv
          echo "===================="
          echo $DEST_DIR
        shell: bash
      # - name: build docker image
      #   working-directory: aws-rds/blueprints/aws-modules-rds/tools
      #   run: |
      #     docker build -t scaffold:latest .
      #   shell: bash

      # # TODO: Download the latest version of the Core module
      # - name: Run script
      #   run: |
      #     input=$(pwd)/aws-rds/blueprints/aws-modules-rds/
      #     output=$DEST_DIR
      #     if [ -d $output ]; then
      #         rm -rf $output
      #     fi
      #     mkdir -p $output
      #     # output=$(pwd)/auto-generated/
      #     # mkdir -p $output
      #     docker run -v $input:/input -v $output:/output scaffold:latest
      #     # dest=$(pwd)/aws-rds/basic/
      #     # if [ -d $dest ]; then
      #     #     rm -rf $dest
      #     # fi
      #     # mkdir -p $dest
      #     # cp -a $output. $dest
      #   shell: bash

      # - name: setup git config
      #   run: |
      #     # setup the username and email. I tend to use 'GitHub Actions Bot' with no email by default
      #     git config user.name "GitHub Actions Bot"
      #     git config user.email "<>"

      # - name: commit
      #   run: |
      #     git status
      #     # Stage the file, commit and push
      #     git add $(pwd)/aws-rds/blueprints/basic/
      #     git commit -m "update blueprints for RDS module"
      #     git push
